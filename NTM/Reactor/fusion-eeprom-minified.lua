local a=nil;local b=nil;local c=nil;local d=nil;local e=false;local f=nil;local g=100000;local h=30*g;local i=0;local j=50;local k=16;local l={"","","        Magnetic Confinement Fusion Reactor","","                Status:","                 Power:","                 Water:","                 Steam:","                Plasma:","           Plasma Type:","                  Temp:","    Blanket Durability:","","           t: Trip  s: Start  x: Stop","",""}local m=com.list()for n,o in m do if o=="ntm_fusion"and a==nil then a=n elseif o=="screen"and b==nil then b=n elseif o=="gpu"and c==nil then c=n end end;if c then com.invoke(c,"bind",b)f=com.invoke(c,"allocateBuffer")com.invoke(c,"setActiveBuffer",f)end;local p=function()e=true;com.invoke(a,"setActive",false)end;local q=function(r,s,t)com.invoke(c,"set",r,s,t)end;while true do local u,v=com.invoke(a,"getEnergyInfo")local w=com.invoke(a,"isActive")local x,y,z,A,B,C,D=com.invoke(a,"getFluid")local E=com.invoke(a,"getPlasmaTemp")local F=com.invoke(a,"getMaxTemp")if F==3500 then i=1080000 elseif F==4500 then i=2160000 elseif F==9000 then i=3280000 else i=0 end;local G=i-com.invoke(a,"getBlanketDamage")if not e and(u<=h or G<=100)then p()end;local H={computer.pullSignal(0.05)}if H[1]=="key_down"then local I,J,K,L,M=table.unpack(H)if K==0x74 then p()elseif K==0x73 and not e then com.invoke(a,"setActive",true)elseif K==0x78 then com.invoke(a,"setActive",false)end end;if c~=nil then if e then d="Trip"elseif w then d="Run"else d="Shutdown"end;com.invoke(c,"fill",1,1,j,k," ")for N,O in ipairs(l)do q(1,N,O)end;q(24,5,d)q(24,6,u.."/"..v)q(24,7,x.."/"..y)q(24,8,z.."/"..A)q(24,9,B.."/"..C)q(24,10,D)q(24,11,E.."/"..F)q(24,12,G.."/"..i)com.invoke(c,"bitblt",0,1,1,j,k,f,1,1)end end